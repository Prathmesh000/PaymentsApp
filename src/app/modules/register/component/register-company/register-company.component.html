<div *ngIf="loading" class="text-center spinner-container loader">
  <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
  </div>
</div>

<div class="corporate-form">
  <h2>Corporate Registration Form</h2>

  <form [formGroup]="corporateForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="corporateName">Corporate Name:<span style="color: red;"> *</span></label>
      <input id="corporateName" type="text" formControlName="corporateName" placeholder="Enter Corporate Name" required>
      <div *ngIf="corporateForm.get('corporateName')?.invalid && corporateForm.get('corporateName')?.touched" class="text-danger">
        <small>Corporate Name is required.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="corporateEmail">Corporate Email:<span style="color: red;"> *</span></label>
      <input id="corporateEmail" type="email" formControlName="corporateEmail" placeholder="Enter Corporate Email" required>
      <div *ngIf="corporateForm.get('corporateEmail')?.invalid && corporateForm.get('corporateEmail')?.touched" class="text-danger">
        <small *ngIf="corporateForm.get('corporateEmail')?.errors?.['required']">Corporate Email is required.</small>
        <small *ngIf="corporateForm.get('corporateEmail')?.errors?.['email']">Valid Corporate Email is required.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="corporateRegNumber">Corporate Reg Number:<span style="color: red;"> *</span></label>
      <input id="corporateRegNumber" type="text" formControlName="corporateRegNumber" placeholder="Enter Registration Number" required>
      <div *ngIf="corporateForm.get('corporateRegNumber')?.invalid && corporateForm.get('corporateRegNumber')?.touched" class="text-danger">
        <small>Corporate Registration Number is required.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="password">Password:<span style="color: red;"> *</span></label>
      <input id="password" type="password" formControlName="password" placeholder="Enter Password" required minlength="6">
      <div *ngIf="corporateForm.get('password')?.invalid && corporateForm.get('password')?.touched" class="text-danger">
        <small *ngIf="corporateForm.get('password')?.errors?.['required']">Password is required.</small>
        <small *ngIf="corporateForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters long.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="balance">Balance:<span style="color: red;"> *</span></label>
      <input id="balance" type="number" formControlName="balance" placeholder="Enter Balance" required min="0">
      <div *ngIf="corporateForm.get('balance')?.invalid && corporateForm.get('balance')?.touched" class="text-danger">
        <small *ngIf="corporateForm.get('balance')?.errors?.['required']">Balance is required.</small>
        <small *ngIf="corporateForm.get('balance')?.errors?.['min']">Balance should be above 10000</small>
      </div>
    </div>

    <div class="form-group">
      <label for="state">State:<span style="color: red;"> *</span></label>
      <input id="state" type="text" formControlName="state" placeholder="Enter State" required>
      <div *ngIf="corporateForm.get('state')?.invalid && corporateForm.get('state')?.touched" class="text-danger">
        <small>State is required.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="city">City:<span style="color: red;"> *</span></label>
      <input id="city" type="text" formControlName="city" placeholder="Enter City" required>
      <div *ngIf="corporateForm.get('city')?.invalid && corporateForm.get('city')?.touched" class="text-danger">
        <small>City is required.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="corporateIFSC">IFSC Code:<span style="color: red;"> *</span></label>
      <input id="corporateIFSC" type="text" formControlName="corporateIFSC" placeholder="Enter IFSC" required>
      <div *ngIf="corporateForm.get('corporateIFSC')?.invalid && corporateForm.get('corporateIFSC')?.touched" class="text-danger">
        <small>Corporate IFSC is required.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="uploadFile">Upload Document:<span style="color: red;"> *</span></label>
      <input id="uploadFile" formControlName="document" type="file" (change)="onFileChange($event)">
      <div *ngIf="corporateForm.get('document')?.invalid && corporateForm.get('document')?.touched" class="text-danger">
          <small *ngIf="corporateForm.get('document')?.errors?.['invalidFileType']">Only .xlsx files are allowed.</small>
          <small *ngIf="corporateForm.get('document')?.errors?.['fileTooLarge']">File size must be less than 5MB.</small>
      </div>
    </div>
    
    <button type="submit" [disabled]="!corporateForm.valid">Submit</button>
  </form>
</div>
