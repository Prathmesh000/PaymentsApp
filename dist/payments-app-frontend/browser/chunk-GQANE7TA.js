import{a as $,c as J,d as Q,e as Z,f as Y,g as X,l as ee,o as M}from"./chunk-PIVF7N2L.js";import{c as G}from"./chunk-KQLASE5C.js";import{$ as j,A as w,B as F,C as N,D as T,Da as K,E as C,Ea as W,F as p,Fa as S,J as B,K as z,L as V,N as s,O as a,P as b,R as x,X as m,_ as E,aa as P,b as L,e as I,i as A,o as D,p as d,q as h,r as f,ra as H,t as y,u as l,ua as U,va as q}from"./chunk-AFT7IMM4.js";import"./chunk-AIZVJUQQ.js";var g=class extends Error{};g.prototype.name="InvalidTokenError";function de(e){return decodeURIComponent(atob(e).replace(/(.)/g,(n,t)=>{let i=t.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}function le(e){let n=e.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return de(n)}catch{return atob(n)}}function te(e,n){if(typeof e!="string")throw new g("Invalid token specified: must be a string");n||(n={});let t=n.header===!0?0:1,i=e.split(".")[t];if(typeof i!="string")throw new g(`Invalid token specified: missing part #${t+1}`);let o;try{o=le(i)}catch(r){throw new g(`Invalid token specified: invalid base64 for part #${t+1} (${r.message})`)}try{return JSON.parse(o)}catch(r){throw new g(`Invalid token specified: invalid json for part #${t+1} (${r.message})`)}}var pe=new h("recaptcha-language"),ue=new h("recaptcha-base-url"),he=new h("recaptcha-nonce-tag"),fe=new h("recaptcha-settings"),ge=new h("recaptcha-v3-site-key"),me=new h("recaptcha-loader-options");function be(e,n,t,{url:i,lang:o,nonce:r}={}){window.ng2recaptchaloaded=()=>{t(grecaptcha)};let c=document.createElement("script");c.innerHTML="";let{url:u,nonce:v}=n(new URL(i||"https://www.google.com/recaptcha/api.js"));u.searchParams.set("render",e==="explicit"?e:e.key),u.searchParams.set("onload","ng2recaptchaloaded"),u.searchParams.set("trustedtypes","true"),o&&u.searchParams.set("hl",o),c.src=u.href;let k=v||r;k&&c.setAttribute("nonce",k),c.async=!0,c.defer=!0,document.head.appendChild(c)}function ve({v3SiteKey:e,onBeforeLoad:n,onLoaded:t}){let i=e?{key:e}:"explicit";ie.loadScript(i,n,t)}var ie={loadScript:be,newLoadScript:ve};function ye(e){return e.asObservable().pipe(A(n=>n!==null))}var ne=(()=>{class e{static{this.ready=null}constructor(t,i,o,r,c,u){this.platformId=t,this.language=i,this.baseUrl=o,this.nonce=r,this.v3SiteKey=c,this.options=u;let v=this.init();this.ready=v?ye(v):I()}init(){if(e.ready)return e.ready;if(!q(this.platformId))return;let t=new L(null);return e.ready=t,ie.newLoadScript({v3SiteKey:this.v3SiteKey,onBeforeLoad:i=>{if(this.options?.onBeforeLoad)return this.options.onBeforeLoad(i);let o=new URL(this.baseUrl??i);return this.language&&o.searchParams.set("hl",this.language),{url:o,nonce:this.nonce}},onLoaded:i=>{let o=i;this.options?.onLoaded&&(o=this.options.onLoaded(i)),t.next(o)}}),t}static{this.\u0275fac=function(i){return new(i||e)(f(T),f(pe,8),f(ue,8),f(he,8),f(ge,8),f(me,8))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac})}}return e})(),we=0,oe=(()=>{class e{constructor(t,i,o,r){this.elementRef=t,this.loader=i,this.zone=o,this.id=`ngrecaptcha-${we++}`,this.errorMode="default",this.resolved=new w,this.error=new w,this.errored=new w,r&&(this.siteKey=r.siteKey,this.theme=r.theme,this.type=r.type,this.size=r.size,this.badge=r.badge)}ngAfterViewInit(){this.subscription=this.loader.ready.subscribe(t=>{t!=null&&t.render instanceof Function&&(this.grecaptcha=t,this.renderRecaptcha())})}ngOnDestroy(){this.grecaptchaReset(),this.subscription&&this.subscription.unsubscribe()}execute(){this.size==="invisible"&&(this.widget!=null?this.grecaptcha.execute(this.widget):this.executeRequested=!0)}reset(){this.widget!=null&&(this.grecaptcha.getResponse(this.widget)&&this.resolved.emit(null),this.grecaptchaReset())}get __unsafe_widgetValue(){return this.widget!=null?this.grecaptcha.getResponse(this.widget):null}expired(){this.resolved.emit(null)}onError(t){this.error.emit(t),this.errored.emit(t)}captchaResponseCallback(t){this.resolved.emit(t)}grecaptchaReset(){this.widget!=null&&this.zone.runOutsideAngular(()=>this.grecaptcha.reset(this.widget))}renderRecaptcha(){let t={badge:this.badge,callback:i=>{this.zone.run(()=>this.captchaResponseCallback(i))},"expired-callback":()=>{this.zone.run(()=>this.expired())},sitekey:this.siteKey,size:this.size,tabindex:this.tabIndex,theme:this.theme,type:this.type};this.errorMode==="handled"&&(t["error-callback"]=(...i)=>{this.zone.run(()=>this.onError(i))}),this.widget=this.grecaptcha.render(this.elementRef.nativeElement,t),this.executeRequested===!0&&(this.executeRequested=!1,this.execute())}static{this.\u0275fac=function(i){return new(i||e)(p(N),p(ne),p(F),p(fe,8))}}static{this.\u0275cmp=y({type:e,selectors:[["re-captcha"]],hostVars:1,hostBindings:function(i,o){i&2&&z("id",o.id)},inputs:{id:"id",siteKey:"siteKey",theme:"theme",type:"type",size:"size",tabIndex:"tabIndex",badge:"badge",errorMode:"errorMode"},outputs:{resolved:"resolved",error:"error",errored:"errored"},exportAs:["reCaptcha"],decls:0,vars:0,template:function(i,o){},encapsulation:2})}}return e})(),re=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=l({type:e})}static{this.\u0275inj=d({})}}return e})(),se=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=l({type:e})}static{this.\u0275inj=d({providers:[ne],imports:[re]})}}return e})();var ae=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=l({type:e})}static{this.\u0275inj=d({imports:[M,re]})}}return e})();function xe(e,n){e&1&&(s(0,"div",19)(1,"div",20),b(2,"span",21)(3,"span",21),a()())}var _=class e{constructor(n,t){this.authService=n;this.router=t}email="";password="";role="";recaptchaResponse="";isLoading=!1;onSubmit(){this.isLoading=!0;let n={email:this.email,password:this.password};if(!this.recaptchaResponse){alert("Please complete the reCaptcha"),this.isLoading=!1;return}this.authService.login(n).subscribe(t=>{console.log("Login Successfull",t);let i=te(t);this.role=i.role;let o=i.id;console.log(this.role),console.log("Decoded JWT:",i),this.role==="corporate"?this.router.navigate([`/corporate/${o}`]):this.role==="bank"?this.router.navigate([`bank/${o}`]):this.router.navigate([`/${this.role}`]),this.isLoading=!1},t=>{console.log("Failed",t),alert("Invalid Credentials"),window.location.reload(),this.isLoading=!1})}onRecaptchaResolved(n){this.recaptchaResponse=n||""}static \u0275fac=function(t){return new(t||e)(p(G),p(K))};static \u0275cmp=y({type:e,selectors:[["app-login-page"]],decls:26,vars:3,consts:[[1,"vh-100"],["class","spinner-container",4,"ngIf"],[1,"container-fluid","h-custom"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-md-9","col-lg-6","col-xl-5"],["src","https://img.freepik.com/free-vector/login-concept-illustration_114360-739.jpg?w=740&t=st=1728196605~exp=1728197205~hmac=596ae6efe121db16be5c5c636d2a1e78f677f72e384371bbcc8e86403840f2bf","alt","Login concept illustration",1,"img-fluid"],[1,"col-md-8","col-lg-6","col-xl-4","offset-xl-1"],[3,"ngSubmit"],["data-mdb-input-init","",1,"form-outline","mb-4"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["data-mdb-input-init","",1,"form-outline","mb-3"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["siteKey","6Ld4Q1QqAAAAAFfRwLgil7R9NJEEOL-Gka-jjc8T",3,"resolved"],[1,"text-center","text-lg-start","mt-4","pt-2"],["type","submit","data-mdb-button-init","","data-mdb-ripple-init","",1,"btn","btn-primary","btn-lg",2,"padding-left","2.5rem","padding-right","2.5rem"],[1,"small","fw-bold","mt-2","pt-1","mb-0"],["href","#!","routerLink","/register",1,"link-danger"],[1,"spinner-container"],["role","status",1,"spinner-border","text-primary","loader"],[1,"sr-only"]],template:function(t,i){t&1&&(s(0,"section",0),B(1,xe,4,0,"div",1),s(2,"div",2)(3,"div",3)(4,"div",4),b(5,"img",5),a(),s(6,"div",6)(7,"form",7),x("ngSubmit",function(){return i.onSubmit()}),s(8,"div",8)(9,"label",9),m(10,"Email address"),a(),b(11,"br"),s(12,"input",10),P("ngModelChange",function(r){return j(i.email,r)||(i.email=r),r}),a()(),s(13,"div",11)(14,"label",12),m(15,"Password"),a(),b(16,"br"),s(17,"input",13),P("ngModelChange",function(r){return j(i.password,r)||(i.password=r),r}),a()(),s(18,"re-captcha",14),x("resolved",function(r){return i.onRecaptchaResolved(r)}),a(),s(19,"div",15)(20,"button",16),m(21,"Login"),a(),s(22,"p",17),m(23,"Don't have an account? "),s(24,"a",18),m(25,"Register"),a()()()()()()()()),t&2&&(C(),V("ngIf",i.isLoading),C(11),E("ngModel",i.email),C(5),E("ngModel",i.password))},dependencies:[H,W,X,$,J,Q,ee,Y,Z,oe],styles:['body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-color:#f7f7f7}.vh-100[_ngcontent-%COMP%]{height:100vh}.container-fluid[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#fff;border-radius:10px;box-shadow:0 4px 20px #0000001a;padding:2rem}img[_ngcontent-%COMP%]{border-radius:10px}.form-outline[_ngcontent-%COMP%]{position:relative;margin-bottom:1.5rem}.form-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700;color:#495057}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ced4da;border-radius:5px;background-color:#fff;transition:border-color .3s ease}input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 10px #007bff1a}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;font-size:1rem;padding:.75rem 1.5rem;border-radius:5px;transition:background-color .3s ease,box-shadow .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;box-shadow:0 4px 10px #005bbb33}.link-danger[_ngcontent-%COMP%]{color:#dc3545}.link-danger[_ngcontent-%COMP%]:hover{color:#c82333;text-decoration:none}@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%]{padding:1rem}.btn-primary[_ngcontent-%COMP%]{padding:.5rem 1rem}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{padding:.75rem}}.spinner-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:inline-block;position:relative;border:3px solid;border-color:#0c0101 #FFF transparent transparent;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}.loader[_ngcontent-%COMP%]:after, .loader[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;margin:auto;border:3px solid;border-color:transparent transparent #FF3D00 #FF3D00;width:40px;height:40px;border-radius:50%;box-sizing:border-box;animation:_ngcontent-%COMP%_rotationBack .5s linear infinite;transform-origin:center center}.loader[_ngcontent-%COMP%]:before{width:32px;height:32px;border-color:#FFF #FFF transparent transparent;animation:_ngcontent-%COMP%_rotation 1.5s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_rotationBack{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}']})};var Me=[{path:"",component:_}],R=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=l({type:e});static \u0275inj=d({imports:[S.forChild(Me),S]})};var ce=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=l({type:e});static \u0275inj=d({imports:[U,R,M,ae,se]})};export{ce as LoginPageModule};
